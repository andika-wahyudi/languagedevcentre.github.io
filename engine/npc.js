import { Entity } from './entity.js'; export class NPC extends Entity { constructor(opts){ super(opts); this.dialog = opts.dialog || ["Hello traveler."]; this.dialogIndex = 0; this.type='npc'; this.id = opts.id || 'npc_'+Math.random().toString(36).slice(2); this.onInteract = opts.onInteract || null; this.roamTimer=0; } update(dt,map){ this.roamTimer += dt; if(this.roamTimer > 5){ this.roamTimer=0; const dirs = ['up','down','left','right']; this.facing = dirs[Math.floor(Math.random()*dirs.length)]; } } getCurrentLine(){ return this.dialog[this.dialogIndex]; } advanceDialog(){ this.dialogIndex++; if(this.dialogIndex >= this.dialog.length){ this.dialogIndex=0; return false; } return true; } }